---
layout: post
header-img: "img/post-bg-dreamer.jpg"
header-mask: 0.4
author: 'Shiyanping'
title: Linux 常用操作命令
subtitle: 为了解服务器打基础
catalog: true
tags: Linux
---

## 1. 简介

作为一名合格前端的工程师，我们一定要了解一点 linux 的常识和 linux 常用命令。这样我们在部署 node 服务的时候，或者服务器跑服务的时候，操作起来才会游刃有余。

在部署项目的时候，我们可以使用 shell 去编写命令，也可以使用 js 编写（可以使用 shelljs 的 npm 包）。

## 2. 常用操作

- `ls` 或者 `dir`：查看当前文件夹下面有哪些文件（不包括隐藏文件）。

  ![](http://cdn.jinyueyue.cn/15502019700132.jpg)

- `ls -l` 或者 `ll`： 查看当前文件夹下面文件的详细内容（不包括隐藏文件）。

  ![](http://cdn.jinyueyue.cn/15502019920965.jpg)

- `ls -a`：查看当前文件夹下面所有的内容（包括隐藏文件）。

  ![](http://cdn.jinyueyue.cn/15502020217820.jpg)

- `mkdir XX`：创建一个名叫 XX 的文件夹。

- `touch XX`：创建一个名叫 XX 文件。

- `cd`：进入某个文件夹，如果想退出一个文件夹，使用 `cd..` 即可。

- `cp dir1 dir2`：将 dir2 文件（可以写目录）复制到 dir2 下，dir1 和 die2 都可以写文件目录。如果再复制一个文件夹时，记得在在`cp`后面添加 `-R` 参数，就会递归去复制文件内容。

- `pwd`：输出当前文件目录地址。

  ![](http://cdn.jinyueyue.cn/15502026069643.jpg)

- `rm 文件名`：删除一个文件（不会有任何提示），想要删除一个文件夹在 `rm` 后面添加 `-r` 参数。

- `mv 文件名 目录`：移动文件到指定的目录，如果想要将文件移动到上一层目录，使用 `mv 文件 ../`。mv 命令还可以给文件改名，使用 `mv 文件 更改的文件名` 即可。

- `scp -P 22 -r 具体文件夹 root@192.168.100.123:/data/coohua-fe/news-admin`：将某个本地文件移动到服务器上。

- `ssh root@192.168.0.1`：通过 ssh 命令连接服务器，`@` 之前是用户名，`@` 之后是具体连接的服务器。登录成功后，可以使用 `exit` 命令退出。

- `su 用户名`：在服务器上，通过 `su` 的命令，切换用户名登录，在登录成功之后，通过 `su` 命令切换用户名时，其实是逐层递增的，一个用户覆盖一个用户，如果使用 `exit` 退出的话，会逐层退出。

- `sudo 要运行的命令`：在服务器上，如果登录的用户权限不够，可以暂时使用 `sudo` 执行某个命令，暂时提升权限。

- `ps -ef | grep node`：查看目前启动的服务，XX 是具体什么服务，比如 apache 服务，nginx 服务，http-server 服务。

- `lsof -i tcp:8888`：查看某个端口具体是什么服务在使用。

- `kill -9 进程号`：杀死一个进程。添加 `-9` 强制退出，不添加 `-9` 让程序自行退出。也可以使用 `pkill 进程名称` 杀死一个进程。

- `who`：可以查看具体有几个用户在登录到当前的操作系统中。

- `shotdown -h now`：关机。

## 3. 文件操作

### 3.1 vim 操作

- `vim 文件名`：对一个文件进行编辑。
- `i` 或者 `a`：对文件进行添加修改操作。
- `esc`：退出编辑，输入其他命令。如：保存，退出。
- `:q!`：强制退出不保存
- `:wq`：保存并退出
- `:q`：退出
- `/ + 搜索的名称`：在对一个文件进行修改时，我们可以对文件中的关键字进行搜索。

### 3.2 查看文件

- 查看文件全部内容：`cat 文件名`
- 查看文件前 2 行：`head -n 2 文件名`
- 查看文件后 2 行：`tail -n 2 文件名`
- 查看某个关键字的次数：`grep "关键词" 文件名 | wc -l`
- 查看某个关键词的具体修改记录：`grep "关键词" 文件名`

## 4. 网络管理命令

- `ifconfig` 或者 `ip addr`：查看当前电脑网络端口，包括物理网卡和虚拟网卡还有本机的回环地址。
  1. 物理网卡使用 eth 表示，多个网卡顺序向下排列。
  2. 本机回环地址使用 lo 表示，不管什么情况下都应该有本机回环地址 `127.0.0.1`。
  3. 虚拟网卡包括： docker 之类的虚拟网卡。
- `route`：查看自己的路由配置，在服务器上输入 route 就可以查看自己的路由配置。
- `ping xx`：检查自己的网络正不正常。
- `ss` 或者 `netstat`： 查看当前进程的端口。
- `ss -anp | grep :22`：查看具体端口被哪个占用。

在 linux 系统中，网卡的配置文件都存放在 `/etc/sysconfig/network-scripts/` 下，我们如果网络有故障，可以去查看对应网卡的配置是否正确。

![](http://cdn.jinyueyue.cn/15502239416796.jpg)

比如物理网卡就是 `ifcfg-eth0`，可以通过 vim 修改网卡配置。

## 5. 下载文件

使用 `wget 文件地址` 进行文件下载，如果网络不好的情况下，可以使用 `wget -c 下载文件的地址`，进行断点续传。

还可以使用 `curl` 进行文件下载。

curl 命令有下载访问的功能，可以使用 curl 在 linux 中下载包，也可以使用 curl 模拟请求。

```bash
curl -d 'name=lilei&age=27' http://localhost:3000/user/addPerson
```

通过 curl 访问接口，`curl -d` 表示 post 请求，后面跟传参，之后是具体访问的接口。

## 6. 常用的 linux 终端快捷键

- ctrl+c：结束当前运行的程序
- ctrl+d：结束输入或者退出 shell，在某个服务器上操作，相当于登出
- ctrl+s：挂起终端，暂停屏幕输出
- ctrl+q：恢复终端输出
- ctrl+l：清屏
- ctrl+a，ctrl+e：迅速定位到头部和尾部
